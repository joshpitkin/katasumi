{
  "project": "Katasumi",
  "version": "1.0.0",
  "lastUpdated": "2026-01-27T17:28:34.501419Z",
  "requirements": [
    {
      "id": "PHASE1-DB-003",
      "category": "Phase 1: Database - Schema Definition",
      "description": "Define unified Shortcut and AppInfo TypeScript types that work across both SQLite and PostgreSQL",
      "acceptanceCriteria": [
        "Shortcut interface includes all required fields: id, app, action, keys, context, category, tags",
        "Keys object supports mac, windows, linux variants",
        "Source object includes type, url, scrapedAt, confidence fields",
        "AppInfo interface includes id, name, displayName, category, platforms, shortcutCount",
        "Platform type is union: 'mac' | 'windows' | 'linux'",
        "SourceType enum includes: 'official', 'community', 'ai-scraped', 'user-added'",
        "Types are exported from core package for reuse in TUI and Web",
        "All fields have JSDoc comments explaining their purpose"
      ],
      "stepsToVerify": [
        "Import Shortcut type in both TUI and Web packages",
        "Create test shortcut object and verify TypeScript validates all required fields",
        "Attempt to assign invalid Platform value and verify TypeScript error",
        "Verify keys object accepts optional mac/windows/linux fields",
        "Verify tags field is typed as string array",
        "Generate TypeScript documentation and verify JSDoc appears",
        "Serialize Shortcut to JSON and verify structure matches schema"
      ],
      "passes": true,
      "priority": 1,
      "priorityRationale": "Schema types needed by all other DB work"
    },
    {
      "id": "PHASE1-INFRA-001",
      "category": "Phase 1: Infrastructure - Monorepo Setup",
      "description": "Set up pnpm workspace monorepo with packages for core, tui, and web",
      "acceptanceCriteria": [
        "Root pnpm-workspace.yaml configured with packages/core, packages/tui, packages/web",
        "Each package has own package.json with name, version, dependencies",
        "Core package exports shared types and database adapters",
        "TUI package depends on core package via workspace:*",
        "Web package depends on core package via workspace:*",
        "turbo.json configured for build pipeline",
        "pnpm install works from root and installs all dependencies",
        "TypeScript configured with composite projects for cross-package types"
      ],
      "stepsToVerify": [
        "Run 'pnpm init' in root and create pnpm-workspace.yaml",
        "Create packages/core, packages/tui, packages/web directories",
        "Run 'pnpm install' from root and verify all packages installed",
        "Import type from core in TUI package and verify TypeScript resolves",
        "Run 'pnpm run build' from root and verify all packages build",
        "Verify turbo.json has tasks: build, dev, lint, test",
        "Change code in core and verify TUI/Web see changes without rebuild",
        "Check node_modules and verify workspace dependencies linked correctly"
      ],
      "passes": true,
      "priority": 1,
      "priorityRationale": "Monorepo must be set up first before any package development"
    },
    {
      "id": "PHASE1-INFRA-002",
      "category": "Phase 1: Infrastructure - Database Migrations",
      "description": "Implement database migration system for SQLite and PostgreSQL schema versioning",
      "acceptanceCriteria": [
        "Migrations stored in core/migrations/ directory",
        "Each migration has up and down functions",
        "Migration naming: YYYYMMDD_HHMMSS_description.ts",
        "Migrations table tracks applied migrations",
        "CLI command to run pending migrations: pnpm run migrate",
        "CLI command to rollback last migration: pnpm run migrate:rollback",
        "Migrations work for both SQLite and PostgreSQL",
        "Initial migration creates all tables with proper schema"
      ],
      "stepsToVerify": [
        "Run 'pnpm run migrate' on fresh SQLite database",
        "Verify all tables created: shortcuts, app_info",
        "Check migrations table and verify initial migration recorded",
        "Create new migration file with test table",
        "Run 'pnpm run migrate' and verify test table created",
        "Run 'pnpm run migrate:rollback' and verify test table dropped",
        "Run same migrations on PostgreSQL and verify tables created",
        "Verify schema matches between SQLite and PostgreSQL"
      ],
      "passes": true,
      "priority": 1,
      "priorityRationale": "Migration system (Prisma) needed before creating databases"
    },
    {
      "id": "PHASE1-DATA-001",
      "category": "Phase 1: Data - Core Shortcuts Database",
      "description": "Create curated shortcuts database with at least 20 popular apps, each with comprehensive shortcut coverage",
      "acceptanceCriteria": [
        "Database includes vim (>100 shortcuts across Normal, Insert, Visual modes)",
        "Database includes tmux (>50 shortcuts for pane, window, session management)",
        "Database includes VSCode (>200 shortcuts across editor, debugging, git)",
        "Database includes git CLI (>40 common commands)",
        "Database includes bash/zsh (>30 shell shortcuts)",
        "Database includes macOS system shortcuts (>100)",
        "Database includes Windows system shortcuts (>100)",
        "Database includes GNOME desktop shortcuts (>50)",
        "Each shortcut has proper context, category, and tags",
        "Each shortcut includes platform-specific key variants where applicable",
        "All shortcuts link to official documentation source URLs"
      ],
      "stepsToVerify": [
        "Query for vim shortcuts and verify count >= 100",
        "Verify vim shortcuts have context (Normal Mode, Insert Mode, etc.)",
        "Query for tmux and verify pane management shortcuts exist",
        "Query for VSCode and verify count >= 200",
        "Verify all shortcuts have non-empty source.url field",
        "Verify macOS shortcuts have mac keys but not windows/linux keys",
        "Search for 'copy' and verify results from multiple apps",
        "Verify each app has appropriate category (Editor, Terminal, OS, etc.)"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "Core shortcuts data needed to test search functionality"
    },
    {
      "id": "PHASE1-DB-001",
      "category": "Phase 1: Database - SQLite (TUI)",
      "description": "Implement SQLite database adapter for TUI with two separate databases: shortcuts.db (bundled, read-only core shortcuts) and user-data.db (local, read-write user shortcuts)",
      "acceptanceCriteria": [
        "SQLiteAdapter class implements DatabaseAdapter interface",
        "shortcuts.db contains at least 5 popular apps (vim, tmux, vscode, git, bash)",
        "shortcuts.db is read-only and bundled with TUI package",
        "user-data.db is created in ~/.katasumi/ directory on first run",
        "user-data.db is read-write for storing user-added shortcuts",
        "Both databases use identical schema (Shortcut table structure)",
        "Queries can search across both databases transparently"
      ],
      "stepsToVerify": [
        "Run TUI application for first time",
        "Verify shortcuts.db exists in package directory",
        "Verify user-data.db is created at ~/.katasumi/user-data.db",
        "Search for 'vim' shortcuts and verify results appear",
        "Add a custom shortcut and verify it's saved to user-data.db",
        "Restart TUI and verify custom shortcut persists",
        "Attempt to write to shortcuts.db and verify it's read-only"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "TUI database needed for local development and testing"
    },
    {
      "id": "PHASE1-DB-002",
      "category": "Phase 1: Database - PostgreSQL (Web)",
      "description": "Implement PostgreSQL database schema and adapter for web app with user accounts, user_shortcuts, collections, and sync_logs tables",
      "acceptanceCriteria": [
        "PostgresAdapter class implements DatabaseAdapter interface",
        "Database includes users table with email, tier, api_token_hash fields",
        "Database includes user_shortcuts table with all Shortcut fields plus user_id FK",
        "Database includes collections table for organizing shortcuts",
        "Database includes collection_shortcuts junction table",
        "Database includes sync_logs table for audit trail",
        "All tables have proper indexes on frequently queried columns",
        "Foreign keys have ON DELETE CASCADE constraints where appropriate"
      ],
      "stepsToVerify": [
        "Run database migration scripts",
        "Verify all tables created: users, user_shortcuts, collections, collection_shortcuts, sync_logs",
        "Insert test user and verify unique email constraint",
        "Insert test shortcut with user_id and verify FK constraint",
        "Delete test user and verify user_shortcuts cascade delete",
        "Query user_shortcuts by app and verify index is used (EXPLAIN query)",
        "Verify updated_at index exists on user_shortcuts table"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "Web database needed for cloud features, can develop in parallel with TUI DB",
      "lastUpdated": "2026-01-27"
    },
    {
      "id": "PHASE1-SEARCH-001",
      "category": "Phase 1: Search - Keyword Engine",
      "description": "Implement keyword-based fuzzy search engine with filtering by app, platform, category, context, and tags",
      "acceptanceCriteria": [
        "KeywordSearchEngine class accepts DatabaseAdapter in constructor",
        "fuzzySearch() method returns ranked results based on query relevance",
        "Exact action match scores 1.0, action starts-with scores 0.8",
        "Tag exact match scores 0.7",
        "Fuzzy match in action scores 0.3-0.6 based on similarity",
        "Results can be filtered by app, platform, category, context",
        "Results are sorted by score descending, then by popularity",
        "Search completes in <100ms for database of 1000 shortcuts",
        "Empty query returns all shortcuts (or top 50 by popularity)"
      ],
      "stepsToVerify": [
        "Search for exact action 'Move cursor left' and verify top result",
        "Search for 'move left' and verify results ranked by relevance",
        "Search for 'vim move' and verify only Vim shortcuts returned when app filter applied",
        "Search for shortcuts with platform=mac and verify only Mac key variants shown",
        "Search with category=Navigation and verify only navigation shortcuts",
        "Search with context='Normal Mode' and verify only matching context",
        "Measure search time with console.time() and verify <100ms",
        "Search empty string and verify top 50 results by popularity"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "Keyword search is foundation for all search features",
      "completedDate": "2026-01-27",
      "implementationNotes": "Implemented KeywordSearchEngine class with fuzzy search and filtering capabilities:\n- Created keyword-search-engine.ts with fuzzy matching using Levenshtein distance algorithm\n- Scoring system: exact match (1.0), starts-with (0.8), tag match (0.7), substring (0.6), fuzzy (0.3-0.6)\n- Supports filtering by app, platform, category, and context\n- Search performance: ~7ms average, well under 100ms requirement\n- Empty query returns top 50 results\n- All acceptance criteria verified with comprehensive test suite\n- Exported from core package for use in TUI and Web applications"
    },
    {
      "id": "PHASE1-TEST-001",
      "category": "Phase 1: Testing - Unit Tests",
      "description": "Implement comprehensive unit tests for core search engine and database adapters",
      "acceptanceCriteria": [
        "Test coverage >80% for core package",
        "KeywordSearchEngine tests: fuzzySearch, searchByKeys, filtering",
        "AISearchEngine tests: mocked AI responses, error handling",
        "SQLiteAdapter tests: CRUD operations, connection handling",
        "PostgresAdapter tests: CRUD operations, transactions",
        "Shortcut schema validation tests",
        "Tests use Vitest or Jest",
        "Tests run in CI pipeline"
      ],
      "stepsToVerify": [
        "Run 'pnpm run test' in core package",
        "Verify all tests pass",
        "Check coverage report and verify >80% coverage",
        "Verify fuzzySearch test covers exact match, partial match, no match",
        "Verify searchByKeys test covers platform filtering",
        "Verify AI tests mock API calls (no real API requests)",
        "Verify database tests use in-memory SQLite",
        "Run tests in CI and verify passing"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "Unit tests should be written alongside core features"
    },
    {
      "id": "PHASE2-TUI-001",
      "category": "Phase 2: TUI - App Scaffold",
      "description": "Set up Ink-based TUI application scaffold with main App component, global state management using Zustand, and two search modes as shown in katasumi-plan.md sections 2.2.2 and 2.2.3",
      "acceptanceCriteria": [
        "TUI package uses Ink 4.x and React 18",
        "Main App.tsx component renders with Header (showing Mode, Platform, AI status) and Footer (showing keyboard shortcuts)",
        "Zustand store configured with all required states: mode ('app-first' | 'full-phrase'), view ('search' | 'results' | 'detail'), platform (Platform), aiEnabled (boolean), selectedApp (AppInfo | null), query (string), filters (object), results (Shortcut[]), selectedShortcut (Shortcut | null)",
        "Component architecture follows katasumi-plan.md section 2.2.6 with App.tsx, AppFirstMode, FullPhraseMode, Header, Footer, GlobalKeybindings components",
        "Application detects user's platform (mac/windows/linux) on startup based on process.platform",
        "Global keybindings work: Ctrl+C to quit, ? for help (opens help overlay), Tab to toggle between App-First and Full-Phrase modes, F4 to toggle AI on/off, F5 or Cmd+P for platform selector",
        "Mode switcher displays current mode in header as shown in mockups (sections 2.2.2 and 2.2.3 of katasumi-plan.md)",
        "Empty state renders for each mode: App-First shows app selector, Full-Phrase shows natural language search input",
        "Application starts in <200ms on first run (measured from command invocation to UI render)",
        "Memory usage is <100MB after startup and idle"
      ],
      "stepsToVerify": [
        "Run 'npm run dev --workspace=@katasumi/tui' from project root and verify TUI launches without errors",
        "Verify Header displays in format: 'Mode: [App-First] | Platform: macOS | AI: OFF' (matching mockup in katasumi-plan.md section 2.2.2)",
        "Verify Footer shows keyboard navigation hints (matching mockup footer sections)",
        "Press Ctrl+C and verify application exits gracefully with exit code 0",
        "Press ? and verify help overlay appears showing all keyboard shortcuts organized by category (section 2.2.4 of katasumi-plan.md)",
        "Press Tab multiple times and verify mode toggles between 'App-First' and 'Full-Phrase' in header",
        "Press F4 and verify AI status toggles between ON and OFF in header",
        "Press F5 (or Cmd+P) and verify platform selector dropdown appears with options: macOS, Windows, Linux, All Platforms",
        "Measure startup time with 'time npm start --workspace=@katasumi/tui' and verify <200ms",
        "Check memory with 'ps aux | grep katasumi' after startup and verify <100MB",
        "Verify platform auto-detected correctly by checking header display matches your OS",
        "Open Chrome DevTools or similar profiler and verify no memory leaks during mode toggling"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "TUI scaffold needed before implementing features. This establishes the foundation for both search modes and all UI components.",
      "implementationNotes": "Reference the detailed mockups in katasumi-plan.md sections 2.2.2 (App-First Mode), 2.2.3 (Full-Phrase Mode), 2.2.4 (Global Features), and 2.2.6 (Component Architecture). The scaffold should support both modes from the start, even if search functionality is not yet implemented. Focus on navigation flow and state management first.",
      "mockupReferences": [
        "katasumi-plan.md section 2.2.2: App-First Search mode mockup with app selector and filters",
        "katasumi-plan.md section 2.2.3: Full-Phrase Search mode mockup with natural language input",
        "katasumi-plan.md section 2.2.4: Global features including Platform Selector, Settings, and Help Overlay",
        "katasumi-plan.md section 2.2.6: Component Architecture showing App.tsx structure and child components",
        "katasumi-plan.md section 2.2.5: Keyboard Navigation Flow Chart"
      ],
      "completedAt": "2026-01-27"
    },
    {
      "id": "PHASE3-WEB-001",
      "category": "Phase 3: Web - Next.js App Scaffold",
      "description": "Set up Next.js 14+ application with App Router, Tailwind CSS, TypeScript, and component structure matching TUI functionality as shown in katasumi-plan.md section 3.2",
      "acceptanceCriteria": [
        "Next.js 14+ with App Router structure in packages/web directory",
        "TypeScript configured with strict mode enabled in tsconfig.json",
        "Tailwind CSS configured with custom theme colors and working",
        "ESLint and Prettier configured with Next.js recommended rules",
        "Directory structure matches katasumi-plan.md section 3.1: app/ (with page.tsx, login/, dashboard/, api/), components/, lib/",
        "Main page.tsx renders search interface with two modes: App-First and Full-Phrase (matching TUI design from sections 2.2.2 and 2.2.3)",
        "app/layout.tsx includes header with mode/platform/AI indicators and footer with keyboard shortcuts",
        "shadcn/ui or Radix UI installed for accessible, keyboard-navigable components (Dialog, Select, Tabs, etc.)",
        "Component files created: SearchBar.tsx, ResultsList.tsx, ShortcutDetail.tsx, AppSelector.tsx, Filters.tsx matching TUI components",
        "Global keyboard shortcuts work: Tab to toggle modes, F4 for AI toggle, F5 for platform selector, ? for help, Cmd+, for settings (section 3.2 of katasumi-plan.md)",
        "Responsive design works on mobile (320px) through desktop (1920px+)",
        "Dark mode support configured using Tailwind dark: class or next-themes",
        "Environment variables configured (.env.local with DATABASE_URL placeholder)",
        "Development server starts without errors using 'npm run dev --workspace=@katasumi/web'"
      ],
      "stepsToVerify": [
        "Run 'npm run dev --workspace=@katasumi/web' from project root and verify server starts on http://localhost:3000",
        "Visit http://localhost:3000 and verify page renders with header showing 'Mode: App-First | Platform: macOS | AI: OFF'",
        "Verify Tailwind styles apply by inspecting elements in DevTools (check computed styles)",
        "Check packages/web/tsconfig.json has \"strict\": true and compilerOptions.paths for @/ alias",
        "Open DevTools console and verify no errors or warnings",
        "Press Tab key and verify mode toggles between App-First and Full-Phrase (visible in header)",
        "Press F4 and verify AI toggle works (header updates to AI: ON/OFF)",
        "Press F5 and verify platform selector dropdown appears with macOS/Windows/Linux/All options",
        "Press ? key and verify help overlay modal opens showing all keyboard shortcuts",
        "Test hot reload by editing packages/web/app/page.tsx and saving (changes appear without full refresh)",
        "Verify shadcn/ui Dialog component renders by triggering help overlay",
        "Test responsive design by resizing browser window from 320px to 1920px width",
        "Toggle dark mode (if implemented) and verify color scheme changes",
        "Check .env.local exists with DATABASE_URL placeholder variable",
        "Run 'npm run lint --workspace=@katasumi/web' and verify no errors",
        "Run 'npm run build --workspace=@katasumi/web' and verify build succeeds with no TypeScript errors",
        "Check that packages/web/components/ directory has all component files listed in acceptance criteria",
        "Verify app/ directory structure matches section 3.1 of katasumi-plan.md"
      ],
      "passes": true,
      "priority": 2,
      "priorityRationale": "Web scaffold needed before web features. Establishes parity with TUI design and ensures keyboard-first navigation works in browser.",
      "implementationNotes": "Reference katasumi-plan.md section 3.1 for directory structure and section 3.2 for key differences from TUI. The web interface should mirror TUI functionality while adding click-based navigation. Use next/link for client-side navigation and implement keyboard event handlers at the layout level for global shortcuts. Consider using Zustand or React Context for state management to match TUI architecture.",
      "mockupReferences": [
        "katasumi-plan.md section 3.1: Web App Structure showing app/, components/, lib/ directories",
        "katasumi-plan.md section 3.2: Key Differences from TUI including consistent features that must match TUI exactly",
        "katasumi-plan.md sections 2.2.2 and 2.2.3: TUI mockups that web interface should visually match",
        "katasumi-plan.md section 2.2.4: Global features (Platform Selector, Settings, Help) that web must implement with same keyboard shortcuts"
      ],
      "technicalNotes": "Use Next.js 14+ App Router with React Server Components where appropriate (e.g., initial data fetching). Client Components needed for interactive elements (use 'use client' directive). Implement keyboard shortcuts using useEffect with document.addEventListener for global shortcuts. Consider using @radix-ui/react-dialog for help overlay, @radix-ui/react-select for dropdowns, and @radix-ui/react-tabs for mode switching.",
      "completedDate": "2026-01-27",
      "notes": "Completed Next.js 14+ application with App Router, Tailwind CSS, TypeScript, Zustand state management, dark mode support, responsive design, and all required components. All 14 acceptance criteria verified successfully. Global keyboard shortcuts working (Tab, F4, F5, ?, Cmd+,). Both App-First and Full-Phrase modes implemented with proper UI scaffolding."
    },
    {
      "id": "PHASE1-SEARCH-002",
      "category": "Phase 1: Search - AI Engine",
      "description": "Implement AI-powered semantic search with support for OpenAI, Anthropic, OpenRouter, and Ollama providers",
      "acceptanceCriteria": [
        "AISearchEngine class accepts AIProviderConfig and DatabaseAdapter",
        "Supports OpenAI (gpt-4, gpt-4-turbo) with API key",
        "Supports Anthropic (claude-3-sonnet, claude-3-opus) with API key",
        "Supports OpenRouter (unified API for multiple models) with API key",
        "Supports Ollama (local, no API key required) with baseUrl",
        "OpenRouter allows model selection from multiple providers (openai/gpt-4, anthropic/claude-3-sonnet, etc.)",
        "semanticSearch() extracts intent from natural language query",
        "Results are re-ranked by AI-determined relevance",
        "Falls back to keyword search if AI provider fails",
        "AI requests timeout after 5 seconds",
        "explainShortcut() returns plain English description of shortcut"
      ],
      "stepsToVerify": [
        "Configure OpenAI API key and search 'how to split window in vim'",
        "Verify results include :vsplit, :split, Ctrl+w v, Ctrl+w s",
        "Configure Anthropic API key and perform same search",
        "Configure OpenRouter API key with model=openai/gpt-4 and perform same search",
        "Configure OpenRouter with model=anthropic/claude-3-sonnet and verify works",
        "Configure Ollama (localhost:11434) and perform same search",
        "Disable network and verify fallback to keyword search",
        "Call explainShortcut() on 'Ctrl+w v' and verify plain English explanation",
        "Search with invalid API key and verify graceful error handling",
        "Measure search time and verify <2 seconds for network-based AI",
        "Run 'npm run test --workspace=@katasumi/core' to execute AI search engine tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": true,
      "priority": 3,
      "priorityRationale": "AI search is enhancement of keyword search",
      "completedDate": "2026-01-27"
    },
    {
      "id": "PHASE1-SEARCH-003",
      "category": "Phase 1: Search - searchByKeys",
      "description": "Implement reverse lookup: search by key combination to find what action it performs",
      "acceptanceCriteria": [
        "searchByKeys() accepts key string and optional platform",
        "Normalizes key variants: 'Cmd+K', '\u2318K', 'Command+K' all match",
        "Returns shortcuts matching the key combination for specified platform",
        "Supports multi-platform search (returns shortcuts for all platforms)",
        "Case-insensitive matching",
        "Handles special keys: Ctrl, Cmd, Alt, Shift, Space, Tab, Enter, Esc",
        "Returns empty array if no shortcuts match"
      ],
      "stepsToVerify": [
        "Search for 'Cmd+K' on macOS platform and verify results",
        "Search for '\u2318K' and verify same results as 'Cmd+K'",
        "Search for 'Ctrl+K' on Windows platform and verify different results",
        "Search for 'j' in vim context and verify 'move down' result",
        "Search for nonexistent key 'Cmd+Shift+F99' and verify empty array",
        "Search for 'cmd+k' (lowercase) and verify matches 'Cmd+K'",
        "Search across all platforms and verify results include mac/windows/linux variants",
        "Run 'npm run test --workspace=@katasumi/core' to execute searchByKeys tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": true,
      "priority": 3,
      "priorityRationale": "Reverse lookup depends on basic search working"
    },
    {
      "id": "PHASE1-SYNC-001",
      "category": "Phase 1: Sync - API Endpoints",
      "description": "Implement REST API endpoints for authentication and bidirectional sync between TUI and cloud",
      "acceptanceCriteria": [
        "POST /api/auth/login accepts email/password and returns JWT token",
        "POST /api/auth/signup creates new user account",
        "POST /api/auth/logout invalidates JWT token",
        "GET /api/sync/pull returns shortcuts modified since provided timestamp",
        "POST /api/sync/push accepts array of shortcuts and writes to database",
        "GET /api/sync/status returns last sync timestamp and pending changes count",
        "All sync endpoints require valid JWT token in Authorization header",
        "Endpoints return 401 for invalid/expired tokens",
        "Push endpoint validates user_id matches token user_id"
      ],
      "stepsToVerify": [
        "POST to /api/auth/signup with email/password and verify 201 response with token",
        "POST to /api/auth/login with valid credentials and verify token returned",
        "POST to sync endpoint without token and verify 401 Unauthorized",
        "POST to /api/sync/push with valid token and shortcut array",
        "Verify shortcuts appear in database with correct user_id",
        "GET /api/sync/pull with since timestamp and verify only recent shortcuts",
        "POST to /api/auth/logout and verify token is invalidated",
        "Use invalidated token on sync endpoint and verify 401",
        "Run 'npm run test --workspace=@katasumi/web' to execute API endpoint tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": true,
      "priority": 3,
      "priorityRationale": "Sync API needed for premium features, but not for basic TUI/Web",
      "completedAt": "2026-01-27"
    },
    {
      "id": "PHASE2-TUI-002",
      "category": "Phase 2: TUI - App-First Mode",
      "description": "Implement App-First search mode with app selector, filters (context, category, tags), and results list",
      "acceptanceCriteria": [
        "App selector shows autocomplete list of available apps",
        "Typing filters app list with fuzzy matching",
        "Arrow keys navigate app list, Enter selects app",
        "After app selection, shows filters bar with Context, Category, Tags dropdowns",
        "Quick Search input filters results within selected app",
        "F3 key focuses filters bar",
        "F2 key returns to app selector",
        "Results update in <100ms after query or filter change",
        "Results show: keys, action, context in square brackets",
        "Create a test for correct paths when running from dist/ directory and add it to the test suite"
      ],
      "stepsToVerify": [
        "Launch TUI and verify app selector is shown",
        "Type 'vim' and verify list filters to Vim-related apps",
        "Press arrow down and verify selection moves",
        "Press Enter on Vim and verify app is selected",
        "Verify filters bar appears with Context/Category/Tags dropdowns",
        "Type 'move' in Quick Search and verify results filter",
        "Press F3 and verify focus moves to Context filter",
        "Press F2 and verify return to app selector",
        "Measure filter response time and verify <100ms",
        "Run 'npm run test --workspace=@katasumi/tui' to execute App-First mode tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 1,
      "priorityRationale": "TUI App-First mode has bug: ES module __dirname not defined causing database path resolution to fail. Fixed by adding fileURLToPath/dirname shim. After rebuild, should be fully functional.",
      "implementationNotes": "Bug fix applied 2026-01-27: Added ES module dirname shim (fileURLToPath/dirname) to AppFirstMode.tsx to resolve database path correctly when running from dist/ directory. Without this, __dirname was undefined causing 'No apps found' error."
    },
    {
      "id": "PHASE2-TUI-003",
      "category": "Phase 2: TUI - Full-Phrase Mode",
      "description": "Implement Full-Phrase search mode with natural language input and cross-app results display",
      "acceptanceCriteria": [
        "Tab key toggles between App-First and Full-Phrase modes",
        "Mode indicator clearly shows current mode at top",
        "Full-Phrase mode shows single large search input",
        "Results grouped by app name",
        "Each result shows: app name, keys, action, context",
        "F4 key toggles AI on/off",
        "AI indicator shows ON/OFF state clearly",
        "When AI is ON, shows 'AI Insight' message below results",
        "When AI is OFF, shows 'Keyword search only' message"
      ],
      "stepsToVerify": [
        "Launch TUI in App-First mode",
        "Press Tab and verify mode switches to Full-Phrase",
        "Verify mode indicator shows 'Full-Phrase'",
        "Type 'split window' and verify cross-app results",
        "Verify results grouped by app (tmux, vim, VSCode, etc.)",
        "Press F4 and verify AI toggle (ON \u2192 OFF \u2192 ON)",
        "Verify AI indicator updates immediately",
        "With AI ON, search and verify AI insight message appears",
        "With AI OFF, verify 'Keyword search only' message",
        "Run 'npm run test --workspace=@katasumi/tui' to execute Full-Phrase mode tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 2,
      "priorityRationale": "Full-Phrase mode depends on App-First mode and AI search"
    },
    {
      "id": "PHASE2-TUI-004",
      "category": "Phase 2: TUI - Shortcut Detail View",
      "description": "Implement detail view showing full shortcut information including description, related shortcuts, tags, and source URL",
      "acceptanceCriteria": [
        "Pressing Enter on a result shows detail view",
        "Detail view shows: app, context, category as header",
        "Action displayed prominently",
        "Keys shown for all platforms (mac, windows, linux)",
        "Description shown with word wrapping",
        "Related shortcuts section shows 3-5 similar shortcuts",
        "Tags displayed as comma-separated list",
        "Source URL shown with label",
        "'c' key copies keys to clipboard",
        "'o' key opens source URL in browser",
        "Esc key returns to results view"
      ],
      "stepsToVerify": [
        "Search for vim shortcuts and press Enter on first result",
        "Verify detail view appears with bordered layout",
        "Verify action text is displayed clearly",
        "Verify keys shown for mac/windows/linux (or N/A if not applicable)",
        "Verify description text wraps properly within box",
        "Press 'c' key and verify keys copied to clipboard (paste to verify)",
        "Press 'o' key and verify browser opens with source URL",
        "Press Esc and verify return to results view",
        "Verify related shortcuts section shows relevant alternatives",
        "Run 'npm run test --workspace=@katasumi/tui' to execute detail view tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "Detail view depends on search modes working"
    },
    {
      "id": "PHASE2-TUI-005",
      "category": "Phase 2: TUI - Platform Selector",
      "description": "Implement global platform selector accessible via F5 or Cmd+P to switch between macOS, Windows, Linux, or All",
      "acceptanceCriteria": [
        "F5 or Cmd+P opens platform selector overlay",
        "Shows 4 options: macOS, Windows, Linux, All Platforms",
        "Current platform marked with indicator (\u25b8 or checkmark)",
        "Arrow keys navigate options",
        "Enter selects platform and closes overlay",
        "Esc closes overlay without changing platform",
        "Platform change updates all displayed shortcuts immediately",
        "Platform preference persists in config.json"
      ],
      "stepsToVerify": [
        "Press F5 and verify platform selector appears",
        "Verify current platform is marked",
        "Press arrow down and verify selection moves",
        "Press Enter on Windows and verify overlay closes",
        "Verify search results now show Windows key variants",
        "Press F5 again and verify Windows is marked as current",
        "Check ~/.katasumi/config.json and verify platform saved",
        "Restart TUI and verify platform preference loaded",
        "Run 'npm run test --workspace=@katasumi/tui' to execute platform selector tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "Platform selector is core feature but not blocking"
    },
    {
      "id": "PHASE2-TUI-010",
      "category": "Phase 2: TUI - Keyboard Navigation",
      "description": "Verify all UI elements are keyboard-accessible with clear focus indicators and intuitive navigation flow",
      "acceptanceCriteria": [
        "All interactive elements reachable via keyboard only",
        "Tab key moves focus between major sections",
        "Arrow keys navigate within lists and dropdowns",
        "Enter confirms selections",
        "Esc goes back one level consistently",
        "Focus indicator clearly visible (border color change, highlight)",
        "No keyboard traps (can always navigate out)",
        "Shortcuts consistent with documented help (? overlay)"
      ],
      "stepsToVerify": [
        "Navigate entire App-First flow using only keyboard",
        "Navigate entire Full-Phrase flow using only keyboard",
        "Verify Tab moves between search input, filters, results",
        "Verify arrow keys work in all lists and dropdowns",
        "Verify Enter confirms in all contexts (select app, shortcut, dropdown)",
        "Verify Esc backs out from detail view \u2192 results \u2192 app selector",
        "Verify focus indicator visible on all focused elements",
        "Try to find keyboard traps (should find none)",
        "Run 'npm run test --workspace=@katasumi/tui' to execute keyboard navigation tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "Keyboard navigation should be built into features as they develop"
    },
    {
      "id": "PHASE3-WEB-002",
      "category": "Phase 3: Web - Authentication UI",
      "description": "Implement login/signup page with email/password and OAuth options using NextAuth.js",
      "acceptanceCriteria": [
        "NextAuth.js configured with JWT strategy",
        "app/login/page.tsx shows login and signup forms",
        "Email and password inputs with validation",
        "OAuth buttons for Google and GitHub",
        "Login form submits to /api/auth/login",
        "Signup form submits to /api/auth/signup",
        "Error messages displayed for invalid credentials",
        "Success redirects to dashboard or search page",
        "Passwords hashed with bcrypt before storage"
      ],
      "stepsToVerify": [
        "Navigate to /login and verify login form appears",
        "Click 'Sign up' link and verify signup form appears",
        "Submit login with empty fields and verify validation errors",
        "Submit signup with valid email/password and verify account created",
        "Login with created account and verify redirect to search page",
        "Login with wrong password and verify error message",
        "Click Google OAuth button and verify OAuth flow initiates",
        "Check database and verify password is hashed (not plaintext)",
        "Run 'npm run test --workspace=@katasumi/web' to execute authentication tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "Auth needed for premium features but not free tier"
    },
    {
      "id": "PHASE3-WEB-003",
      "category": "Phase 3: Web - Search UI (App-First Mode)",
      "description": "Implement App-First search mode UI matching TUI design with click and keyboard navigation",
      "acceptanceCriteria": [
        "App selector component with autocomplete dropdown",
        "Filters bar with Context, Category, Tags dropdowns (using Radix UI or shadcn/ui)",
        "Quick Search input with realtime filtering",
        "Results list with same layout as TUI (keys, action, context)",
        "Keyboard shortcuts work: Tab (toggle mode), Cmd+K (change app), Cmd+F (focus filters)",
        "Click navigation works on all elements",
        "Responsive design works on mobile (filters stack vertically)",
        "Loading state shown during async operations"
      ],
      "stepsToVerify": [
        "Open web app and verify app selector shown",
        "Click on app selector and verify dropdown appears",
        "Type 'vim' and verify autocomplete filters list",
        "Click Vim and verify app selected, filters bar appears",
        "Click Context dropdown and verify options appear",
        "Type in Quick Search and verify results filter in <100ms",
        "Press Cmd+K and verify app selector reopens",
        "Resize to mobile width and verify filters stack vertically",
        "Initiate search and verify loading spinner appears",
        "Run 'npm run test --workspace=@katasumi/web' to execute App-First mode UI tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 1,
      "priorityRationale": "Web search is critical missing functionality - UI scaffold exists but KeywordSearchEngine integration needed. SearchBar has TODO placeholder, must wire up database adapter and search engine to make web app functional."
    },
    {
      "id": "PHASE3-WEB-004",
      "category": "Phase 3: Web - Search UI (Full-Phrase Mode)",
      "description": "Implement Full-Phrase search mode UI with natural language input and cross-app results",
      "acceptanceCriteria": [
        "Tab key toggles between App-First and Full-Phrase modes",
        "Mode toggle button visible and clickable",
        "Large search input with placeholder text",
        "Results grouped by app with clear dividers",
        "AI toggle button (Cmd+A or click)",
        "AI status indicator shows ON/OFF and remaining query count",
        "Results show app icon/name, keys, action, context",
        "Premium users see 'Unlimited' instead of query count"
      ],
      "stepsToVerify": [
        "Click mode toggle or press Tab and verify switch to Full-Phrase",
        "Verify large search input appears",
        "Type 'how to split screen' and verify cross-app results",
        "Verify results grouped by app name",
        "Click AI toggle and verify indicator changes ON \u2192 OFF",
        "Verify query count decrements for free users",
        "Login as premium user and verify 'Unlimited' shown",
        "Verify app icons/names displayed correctly",
        "Run 'npm run test --workspace=@katasumi/web' to execute Full-Phrase mode UI tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "Full-Phrase mode for web parallels TUI development"
    },
    {
      "id": "PHASE3-WEB-005",
      "category": "Phase 3: Web - Shortcut Detail Modal",
      "description": "Implement modal/dialog showing full shortcut details with copy and open docs functionality",
      "acceptanceCriteria": [
        "Clicking result opens detail modal",
        "Modal shows: app, context, category, action, keys, description, related shortcuts, tags, source",
        "Modal uses Radix Dialog or similar accessible component",
        "Copy button copies keys to clipboard",
        "Open Docs button opens source URL in new tab",
        "Esc key or click outside closes modal",
        "Modal scrollable if content exceeds viewport height",
        "Related shortcuts clickable (opens their detail modals)"
      ],
      "stepsToVerify": [
        "Click on a search result and verify modal opens",
        "Verify all shortcut details displayed",
        "Click Copy button and verify keys in clipboard",
        "Click Open Docs and verify new tab opens with source URL",
        "Press Esc and verify modal closes",
        "Click outside modal and verify it closes",
        "Find shortcut with long description and verify scrolling works",
        "Click related shortcut and verify its modal opens",
        "Run 'npm run test --workspace=@katasumi/web' to execute detail modal tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "Detail modal needed for complete search experience"
    },
    {
      "id": "PHASE3-WEB-008",
      "category": "Phase 3: Web - API Routes",
      "description": "Implement Next.js API routes for search, AI, and sync operations",
      "acceptanceCriteria": [
        "GET /api/search?q=query&app=vim&platform=mac returns search results",
        "POST /api/ai with {query, platform} returns AI-enhanced results",
        "Rate limiting: 5 AI queries per day for free users",
        "GET /api/sync/pull?since=timestamp returns user shortcuts",
        "POST /api/sync/push with shortcuts array syncs to database",
        "All sync endpoints require authentication (JWT verification)",
        "Error responses include helpful error messages",
        "API responses cached appropriately (Redis or Vercel KV)"
      ],
      "stepsToVerify": [
        "Make GET request to /api/search?q=move with curl",
        "Verify JSON response with shortcuts array",
        "Make POST to /api/ai with query and verify AI results",
        "Make 6 AI requests as free user and verify rate limit error",
        "Make sync request without auth header and verify 401",
        "Login and make GET /api/sync/pull with valid token",
        "Verify user's shortcuts returned",
        "Make POST /api/sync/push with new shortcut and verify saved",
        "Run 'npm run test --workspace=@katasumi/web' to execute API route tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 3,
      "priorityRationale": "API routes needed for web functionality"
    },
    {
      "id": "PHASE1-DOCS-001",
      "category": "Phase 1: Documentation - README",
      "description": "Create comprehensive README.md with project overview, installation, and usage instructions",
      "acceptanceCriteria": [
        "README includes project description and key features",
        "Installation instructions for TUI: npm install -g katasumi",
        "Usage examples with screenshots/GIFs",
        "Links to detailed documentation in docs/",
        "Contributing guide link",
        "License information (MIT)",
        "Badges: build status, coverage, version, downloads",
        "Table of contents for easy navigation"
      ],
      "stepsToVerify": [
        "Open README.md in GitHub and verify formatting",
        "Follow installation instructions and verify TUI installs",
        "Try usage examples and verify they work",
        "Click documentation links and verify pages exist",
        "Verify badges show correct status (build passing, etc.)",
        "Check license file matches README (MIT)",
        "Verify table of contents links work",
        "Review screenshots/GIFs and verify they're current",
        "Run 'npm run test --workspace=@katasumi/core' to verify documentation links",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Documentation important but can be written as features complete"
    },
    {
      "id": "PHASE1-INFRA-003",
      "category": "Phase 1: Infrastructure - CI/CD Pipeline",
      "description": "Set up GitHub Actions for automated testing, linting, and deployment",
      "acceptanceCriteria": [
        "GitHub Actions workflow runs on pull request and push to main",
        "Workflow installs pnpm and dependencies",
        "Runs TypeScript compilation check",
        "Runs ESLint on all packages",
        "Runs unit tests with coverage reporting",
        "TUI package publishes to npm on git tag",
        "Web package deploys to Vercel on push to main",
        "Workflow fails if any check fails (prevents merge)"
      ],
      "stepsToVerify": [
        "Create .github/workflows/ci.yml file",
        "Create pull request and verify workflow runs",
        "Introduce TypeScript error and verify workflow fails",
        "Fix error and verify workflow passes",
        "Create git tag v1.0.0 and verify npm publish workflow runs",
        "Check npm registry and verify TUI package published",
        "Push to main and verify Vercel deployment workflow runs",
        "Check Vercel and verify web app deployed",
        "Run 'npm test' from root to verify CI pipeline tests pass"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "CI/CD important but can be set up after initial development"
    },
    {
      "id": "PHASE1-SYNC-002",
      "category": "Phase 1: Sync - Conflict Resolution",
      "description": "Implement conflict detection and resolution when same shortcut is modified in both TUI and cloud",
      "acceptanceCriteria": [
        "Sync engine detects conflicts when updated_at timestamps differ",
        "Supports ConflictStrategy: local, remote, newest, merge, manual",
        "Default strategy is 'newest' (most recent updated_at wins)",
        "User can configure strategy in config.json",
        "Conflicts are logged to sync_logs table",
        "Manual strategy prompts user to choose version",
        "Merge strategy combines tags and preserves both descriptions",
        "Conflict resolution increments conflict_version field"
      ],
      "stepsToVerify": [
        "Modify shortcut in TUI (set updated_at to now)",
        "Modify same shortcut in Web (set updated_at to now + 1 second)",
        "Run sync with strategy='newest' and verify Web version wins",
        "Run sync with strategy='local' and verify TUI version wins",
        "Check sync_logs table and verify conflict was logged",
        "Set strategy='manual' and verify user is prompted",
        "Verify conflict_version incremented after resolution",
        "Set strategy='merge' and verify tags from both versions combined",
        "Run 'npm run test --workspace=@katasumi/core' to execute conflict resolution tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Conflict resolution is enhancement of basic sync"
    },
    {
      "id": "PHASE2-TUI-006",
      "category": "Phase 2: TUI - Settings Panel",
      "description": "Implement settings panel accessible via F6 or Cmd+, for configuring default mode, platform, AI provider, and sync preferences",
      "acceptanceCriteria": [
        "F6 or Cmd+, opens settings panel overlay",
        "General section: Default Mode, Default Platform, Auto-detect Platform",
        "AI Search section: Provider, API Key (masked), Model",
        "Sync section: Auto-sync toggle, Sync Interval, Last Sync time, Sync Now button",
        "Display section: Result Limit, Show Descriptions, Compact Mode",
        "Tab navigates between fields",
        "Enter toggles dropdowns or confirms input",
        "Save button writes to config.json",
        "Cancel button discards changes and closes"
      ],
      "stepsToVerify": [
        "Press F6 and verify settings panel appears",
        "Verify all sections displayed: General, AI Search, Sync, Display",
        "Tab through fields and verify focus indicator moves",
        "Change Default Mode to Full-Phrase and click Save",
        "Verify config.json updated with new default mode",
        "Reopen settings and verify value persisted",
        "Enter AI API key and verify it's masked (shows \u2022\u2022\u2022\u2022\u2022)",
        "Click Cancel and verify changes discarded",
        "Click Sync Now and verify sync initiated"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Settings panel is polish, not critical for MVP"
    },
    {
      "id": "PHASE2-TUI-007",
      "category": "Phase 2: TUI - Help Overlay",
      "description": "Implement help overlay accessible via ? key showing all keyboard shortcuts organized by category",
      "acceptanceCriteria": [
        "? key opens help overlay",
        "Help organized into sections: Global, Navigation, Search Modes, Detail View",
        "All keyboard shortcuts documented with descriptions",
        "Uses consistent formatting: Key - Description",
        "Esc closes help overlay",
        "Help overlay scrollable if content exceeds terminal height",
        "Help adapts to current mode (shows mode-specific shortcuts)"
      ],
      "stepsToVerify": [
        "Press ? key and verify help overlay appears",
        "Verify Global section includes Ctrl+C, ?, Cmd+,, Cmd+P",
        "Verify Navigation section includes \u2191\u2193, Enter, Esc, /",
        "Verify Search Modes section includes Tab, F2, F3, F4",
        "Verify Detail View section includes c, o",
        "Press Esc and verify overlay closes",
        "Resize terminal to small height and verify help scrollable",
        "Open help in App-First mode vs Full-Phrase and verify differences",
        "Run 'npm run test --workspace=@katasumi/tui' to execute help overlay tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Help overlay is important but can come after core features work"
    },
    {
      "id": "PHASE2-TUI-008",
      "category": "Phase 2: TUI - Login Command",
      "description": "Implement 'katasumi login' CLI command for authenticating premium users and storing API token",
      "acceptanceCriteria": [
        "Command prompts for email and password",
        "Password input is masked",
        "On success, displays 'Logged in successfully' message",
        "Stores JWT token in ~/.katasumi/config.json",
        "Token stored with 600 file permissions (user read/write only)",
        "Provides --web flag for OAuth browser-based login",
        "On error, displays helpful error message",
        "Validates token by making test API call"
      ],
      "stepsToVerify": [
        "Run 'katasumi login' and verify email prompt",
        "Enter test email and verify password prompt",
        "Enter password and verify characters masked",
        "With valid credentials, verify success message",
        "Check config.json and verify token stored",
        "Run 'ls -la ~/.katasumi/config.json' and verify 600 permissions",
        "Run 'katasumi login --web' and verify browser opens",
        "With invalid credentials, verify error message displayed",
        "Run 'npm run test --workspace=@katasumi/tui' to execute login command tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Login command depends on sync API being ready"
    },
    {
      "id": "PHASE2-TUI-009",
      "category": "Phase 2: TUI - Performance Optimization",
      "description": "Ensure TUI meets all performance targets: <200ms startup, <100ms search, <50ms filter updates",
      "acceptanceCriteria": [
        "Cold start (first run) completes in <200ms",
        "Warm start (subsequent runs) completes in <150ms",
        "Keyword search returns results in <100ms",
        "Filter changes update results in <50ms",
        "App selector filters update in <50ms",
        "Detail view renders in <50ms",
        "Memory usage stays below 100MB during normal operation",
        "SQLite queries execute in <10ms"
      ],
      "stepsToVerify": [
        "Add console.time() around app startup and verify <200ms",
        "Run app second time and verify <150ms",
        "Add timing to search function and verify <100ms for keyword search",
        "Toggle Context filter and measure time to results update (<50ms)",
        "Type in app selector and measure filter update time (<50ms)",
        "Navigate to detail view and measure render time (<50ms)",
        "Monitor memory with process.memoryUsage() and verify <100MB",
        "Log SQLite query times and verify <10ms",
        "Run 'npm run test --workspace=@katasumi/tui' to execute performance tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Performance optimization after features are complete"
    },
    {
      "id": "PHASE2-TUI-011",
      "category": "Phase 2: TUI - Error Handling & Empty States",
      "description": "Implement comprehensive error handling and helpful empty states throughout TUI",
      "acceptanceCriteria": [
        "No apps found: Shows message 'No apps match your search. Try a different query.'",
        "No shortcuts found: Shows 'No shortcuts found. Try adjusting filters or search query.'",
        "Database error: Shows 'Database error. Please try again.'",
        "Network error (sync): Shows 'Network error. Check connection and try again.'",
        "AI error: Falls back to keyword search with message 'AI unavailable, using keyword search'",
        "API rate limit: Shows 'Rate limit reached. Upgrade to Premium for unlimited AI searches.'",
        "All errors logged to ~/.katasumi/error.log",
        "Error messages user-friendly (no stack traces shown to user)"
      ],
      "stepsToVerify": [
        "Search for nonexistent app 'asdfqwer' and verify empty state message",
        "Select app and filter to impossible combination, verify no results message",
        "Corrupt database file and verify graceful error message",
        "Disconnect network and attempt sync, verify network error message",
        "Configure invalid AI API key and search, verify fallback to keyword",
        "As free user, exceed 5 AI queries and verify rate limit message",
        "Check error.log and verify errors logged with timestamps",
        "Verify no stack traces shown in UI (only in log file)",
        "Run 'npm run test --workspace=@katasumi/tui' to execute error handling tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Error handling polish after features work"
    },
    {
      "id": "PHASE2-TUI-012",
      "category": "Phase 2: TUI - Integration Tests",
      "description": "Implement integration tests for TUI user flows using Ink's testing utilities",
      "acceptanceCriteria": [
        "Test coverage >60% for TUI package",
        "Tests for App-First mode: select app, filter, view details",
        "Tests for Full-Phrase mode: search, toggle AI, view results",
        "Tests for keyboard navigation: Tab, arrow keys, Enter, Esc",
        "Tests for settings: open, modify, save",
        "Tests use Ink's render and waitFor utilities",
        "Tests run headless (no terminal required)",
        "Snapshot tests for UI layouts"
      ],
      "stepsToVerify": [
        "Run 'pnpm run test' in TUI package",
        "Verify App-First flow test passes",
        "Verify Full-Phrase flow test passes",
        "Verify keyboard navigation test simulates key presses",
        "Verify settings test opens panel and saves changes",
        "Check snapshots and verify UI layout captured",
        "Run tests headless in CI and verify passing",
        "Check coverage and verify >60%",
        "Run 'npm run test --workspace=@katasumi/tui' to execute integration tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Integration tests after TUI features complete"
    },
    {
      "id": "PHASE3-WEB-006",
      "category": "Phase 3: Web - User Dashboard (Premium)",
      "description": "Implement user dashboard showing usage stats, custom shortcuts, collections, and sync status",
      "acceptanceCriteria": [
        "Dashboard accessible at /dashboard route",
        "Requires authentication (redirects to login if not logged in)",
        "Shows usage stats: AI queries used, total shortcuts, collections count",
        "Lists user's custom shortcuts with edit/delete actions",
        "Shows collections with shortcut counts",
        "Displays last sync time and Sync Now button",
        "Export button to download shortcuts as JSON/CSV",
        "Settings link to account settings page"
      ],
      "stepsToVerify": [
        "Navigate to /dashboard while logged out and verify redirect to /login",
        "Login and navigate to /dashboard",
        "Verify usage stats displayed (AI queries, shortcuts, collections)",
        "Add custom shortcut and verify it appears in list",
        "Edit custom shortcut and verify changes saved",
        "Delete custom shortcut and verify removed from list",
        "Click Sync Now and verify last sync time updates",
        "Click Export and verify JSON file downloads",
        "Run 'npm run test --workspace=@katasumi/web' to execute dashboard tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Dashboard is premium feature, not needed for MVP"
    },
    {
      "id": "PHASE3-WEB-007",
      "category": "Phase 3: Web - Responsive Design",
      "description": "Ensure web UI is fully responsive and works on mobile, tablet, and desktop screen sizes",
      "acceptanceCriteria": [
        "Mobile (320px-768px): Single column layout, filters collapsed by default",
        "Tablet (768px-1024px): Two column layout where appropriate",
        "Desktop (1024px+): Full layout with sidebar filters",
        "Touch-friendly tap targets (minimum 44x44px)",
        "Hamburger menu for navigation on mobile",
        "Search input full-width on mobile",
        "Results list scrollable on all screen sizes",
        "Modal/dialog responsive (full screen on mobile)"
      ],
      "stepsToVerify": [
        "Open DevTools and resize to 320px width",
        "Verify layout switches to single column",
        "Verify filters collapsed (expandable button shown)",
        "Tap search input and verify keyboard doesn't obscure results",
        "Resize to 768px and verify two-column layout",
        "Resize to 1024px and verify full desktop layout with sidebar",
        "On mobile, verify hamburger menu works",
        "Open detail modal on mobile and verify full-screen display",
        "Run 'npm run test --workspace=@katasumi/web' to execute responsive design tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Responsive design important but can be refined after core features"
    },
    {
      "id": "PHASE3-WEB-009",
      "category": "Phase 3: Web - Keyboard Shortcuts",
      "description": "Implement all keyboard shortcuts matching TUI (with Cmd/Ctrl modifiers) and show shortcuts hint tooltip",
      "acceptanceCriteria": [
        "Tab toggles search mode (App-First \u2194 Full-Phrase)",
        "/ or clicking search focuses input",
        "\u2191\u2193 navigate results list",
        "Enter opens detail modal",
        "Esc closes modal/dropdown/overlay",
        "Cmd/Ctrl+K opens app selector",
        "Cmd/Ctrl+F focuses filters",
        "Cmd/Ctrl+A toggles AI",
        "Cmd/Ctrl+P opens platform selector",
        "Cmd/Ctrl+, opens settings",
        "? opens keyboard shortcuts help",
        "All shortcuts shown in help overlay accessible via ?"
      ],
      "stepsToVerify": [
        "Press Tab and verify mode toggle",
        "Press / and verify search input focused",
        "Search for shortcuts, then press \u2191\u2193 and verify navigation",
        "Press Enter and verify detail modal opens",
        "Press Esc and verify modal closes",
        "Press Cmd+K (Mac) or Ctrl+K (Windows) and verify app selector",
        "Press Cmd+A and verify AI toggle",
        "Press ? and verify help overlay with all shortcuts",
        "Verify help overlay lists all keyboard shortcuts with descriptions",
        "Run 'npm run test --workspace=@katasumi/web' to execute keyboard shortcut tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Keyboard shortcuts enhance UX but not critical for launch"
    },
    {
      "id": "PHASE3-WEB-010",
      "category": "Phase 3: Web - Share Shortcuts via URL",
      "description": "Implement shareable URLs that link directly to specific shortcuts or search results",
      "acceptanceCriteria": [
        "Each shortcut has unique URL: /s/{shortcut-id}",
        "URL includes app and action in path for SEO: /s/vim-move-word-forward",
        "Opening shortcut URL shows detail modal immediately",
        "Search queries can be shared: /search?q=split+window&mode=full-phrase",
        "Shared URLs work for unauthenticated users (public shortcuts only)",
        "Share button in detail modal copies URL to clipboard",
        "Meta tags for Open Graph (preview on social media)",
        "URL state preserved in browser history (back button works)"
      ],
      "stepsToVerify": [
        "Open detail modal and verify URL changes to /s/vim-move-word-forward",
        "Copy URL and open in new incognito tab",
        "Verify detail modal opens automatically with correct shortcut",
        "Search for 'split window' and verify URL includes query params",
        "Copy search URL and open in new tab",
        "Verify same search results appear",
        "Click Share button and verify URL copied to clipboard",
        "Check page source and verify Open Graph meta tags present",
        "Navigate through app, then press browser back button and verify works",
        "Run 'npm run test --workspace=@katasumi/web' to execute URL sharing tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "URL sharing is nice feature but not critical"
    },
    {
      "id": "PHASE3-WEB-011",
      "category": "Phase 3: Web - Accessibility (WCAG 2.1 Level AA)",
      "description": "Ensure web UI meets WCAG 2.1 Level AA accessibility standards",
      "acceptanceCriteria": [
        "All interactive elements keyboard accessible",
        "Focus indicators visible with 3:1 contrast ratio",
        "Color contrast meets 4.5:1 for normal text, 3:1 for large text",
        "All images have alt text",
        "Semantic HTML used (nav, main, section, article)",
        "ARIA labels on icon buttons and complex interactions",
        "Form inputs have associated labels",
        "Skip to main content link present",
        "Passes axe DevTools automated accessibility audit",
        "Screen reader tested with NVDA/JAWS (Windows) or VoiceOver (Mac)"
      ],
      "stepsToVerify": [
        "Install axe DevTools extension and run audit",
        "Verify 0 violations for WCAG 2.1 Level AA",
        "Tab through entire UI and verify focus indicators visible",
        "Use contrast checker on all text and verify 4.5:1 ratio",
        "Verify all buttons have visible labels or aria-label",
        "Check form inputs have <label> elements with for attribute",
        "Enable screen reader and navigate through app",
        "Verify all functionality accessible via screen reader",
        "Verify skip link appears on tab and works",
        "Test with keyboard only (no mouse) and verify full functionality",
        "Run 'npm run test --workspace=@katasumi/web' to execute accessibility tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "Accessibility important but can be addressed after core features"
    },
    {
      "id": "PHASE3-WEB-012",
      "category": "Phase 3: Web - E2E Tests",
      "description": "Implement end-to-end tests for critical web UI user flows using Playwright",
      "acceptanceCriteria": [
        "E2E tests cover: signup, login, search, view details, sync",
        "Tests run against local development server",
        "Tests use Playwright for browser automation",
        "Tests cover Chrome, Firefox, Safari (webkit)",
        "Tests include mobile viewport testing",
        "Visual regression tests for key pages",
        "Tests run in CI pipeline",
        "Test database isolated (seeded with test data)"
      ],
      "stepsToVerify": [
        "Run 'pnpm run test:e2e' in web package",
        "Verify signup flow test creates user and logs in",
        "Verify search flow test searches and views details",
        "Verify sync test creates shortcut in TUI and sees it in web",
        "Check test runs in Chrome, Firefox, Safari",
        "Verify mobile viewport test runs at 375px width",
        "Check visual regression screenshots for diffs",
        "Run in CI and verify passing",
        "Run 'npm run test:e2e --workspace=@katasumi/web' to execute E2E tests",
        "Run 'npm test' from root to execute all package tests"
      ],
      "passes": false,
      "priority": 4,
      "priorityRationale": "E2E tests after web features complete"
    },
    {
      "id": "PHASE1-DOCS-002",
      "category": "Phase 1: Documentation - API Documentation",
      "description": "Generate API documentation for core package using TypeDoc",
      "acceptanceCriteria": [
        "TypeDoc configured in core package",
        "API docs generated in docs/api/ directory",
        "Documentation covers all public interfaces and classes",
        "Code examples included in JSDoc comments",
        "Documentation deployed to GitHub Pages or similar",
        "README links to API documentation",
        "Documentation includes search functionality",
        "Documentation auto-generated in CI pipeline"
      ],
      "stepsToVerify": [
        "Run 'pnpm run docs' in core package",
        "Verify docs/api/ directory created with HTML files",
        "Open docs/api/index.html and verify all exports documented",
        "Check DatabaseAdapter interface docs and verify methods listed",
        "Verify code examples render correctly",
        "Deploy to GitHub Pages and verify accessible",
        "Test search functionality in docs",
        "Verify CI builds and deploys docs on push to main"
      ],
      "passes": true,
      "priority": 5,
      "priorityRationale": "API docs nice-to-have, lower priority",
      "completionNotes": "TypeDoc configured and integrated. API documentation generated to docs/api/ with search functionality. GitHub Actions workflow created to auto-generate docs on push to main. README updated with link to API documentation.",
      "lastUpdated": "2026-01-27"
    },
    {
      "id": "PHASE1-DOCS-003",
      "category": "Phase 1: Documentation - Contributing Guide",
      "description": "Create CONTRIBUTING.md with guidelines for adding shortcuts, reporting bugs, and submitting PRs",
      "acceptanceCriteria": [
        "CONTRIBUTING.md in root directory",
        "Section on how to add shortcuts to core database",
        "Shortcut data format specification",
        "Section on reporting bugs with issue template link",
        "Section on submitting PRs with checklist",
        "Code style guide (Prettier, ESLint)",
        "Development setup instructions",
        "Link to Code of Conduct"
      ],
      "stepsToVerify": [
        "Open CONTRIBUTING.md and verify all sections present",
        "Follow 'adding shortcuts' instructions and verify process works",
        "Check shortcut data format matches Shortcut interface",
        "Click issue template link and verify GitHub issue form",
        "Review PR checklist and verify items are actionable",
        "Verify code style guide matches .eslintrc and .prettierrc",
        "Follow development setup and verify repo runs locally",
        "Verify Code of Conduct link works",
        "Run 'npm test' from root to verify documentation tests"
      ],
      "passes": false,
      "priority": 5,
      "priorityRationale": "Contributing guide important for open source but not for initial development"
    }
  ]
}